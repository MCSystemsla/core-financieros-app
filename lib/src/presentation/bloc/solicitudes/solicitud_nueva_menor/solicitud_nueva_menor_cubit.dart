import 'dart:developer';

import 'package:bloc/bloc.dart';
import 'package:core_financiero_app/src/datasource/solicitudes/local_db/responses/responses_local_db.dart';
import 'package:core_financiero_app/src/datasource/solicitudes/local_db/solicitudes_db_service.dart';
import 'package:core_financiero_app/src/datasource/solicitudes/nueva_menor/solicitud_nueva_menor.dart';
import 'package:core_financiero_app/src/domain/repository/solicitudes_credito/solicitudes_credito_repository.dart';
import 'package:core_financiero_app/src/presentation/bloc/auth/branch_team/branchteam_cubit.dart';
import 'package:equatable/equatable.dart';

part 'solicitud_nueva_menor_state.dart';

class SolicitudNuevaMenorCubit extends Cubit<SolicitudNuevaMenorState> {
  final SolicitudesCreditoRepository repository;
  final ObjectBoxService localDbProvider;
  SolicitudNuevaMenorCubit(this.repository, this.localDbProvider)
      : super(SolicitudNuevaMenorInitial());

  Future<void> createSolicitudNuevaMenor() async {
    try {
      emit(state.copyWith(status: Status.inProgress));
      await Future.delayed(const Duration(seconds: 3));
      final (isOk, msg) = await repository.createSolicitudCreditoNuevaMenor(
          solicitudNuevaMenor: SolicitudNuevaMenor(
        isOffline: state.isDone,
        objOrigenSolicitudId: state.objOrigenSolicitudId,
        nombre1: state.nombre1,
        nombre2: state.nombre2,
        apellido1: state.apellido1,
        apellido2: state.apellido2,
        cedula: state.cedula,
        objPaisEmisorCedula: state.objPaisEmisorCedula,
        fechaEmisionCedula: state.fechaEmisionCedula,
        fechaVencimientoCedula: state.fechaVencimientoCedula,
        fechaNacimiento: state.fechaNacimiento,
        telefono: state.telefono,
        celular: state.celular,
        direccionCasa: state.direccionCasa,
        barrioCasa: state.barrioCasa,
        objMunicipioCasaId: state.objMunicipioCasaId,
        objDepartamentoCasaId: state.objDepartamentoCasaId,
        objPaisCasaId: state.objPaisCasaId,
        profesion: state.profesion,
        ocupacion: state.ocupacion,
        nacionalidad: state.nacionalidad,
        objCondicionCasaId: state.objCondicionCasaId,
        anosResidirCasa: state.anosResidirCasa,
        email: state.email,
        monto: state.monto,
        objMonedaId: state.objMonedaId,
        objPropositoId: state.objPropositoId,
        objFrecuenciaId: state.objFrecuenciaId,
        cuota: state.cuota,
        objActividadId: state.objActividadId,
        objActividadId1: state.objActividadId1,
        objActividadId2: state.objActividadId2,
        objSectorId: state.objSectorId,
        nombreNegocio: state.nombreNegocio,
        tiempoFuncionamientoNegocio: state.tiempoFuncionamientoNegocio,
        direccionNegocio: state.direccionNegocio,
        barrioNegocio: state.barrioNegocio,
        objMunicipioNegocioId: state.objMunicipioNegocioId,
        objCondicionNegocioId: state.objCondicionNegocioId,
        horarioTrabajo: state.horarioTrabajo,
        horarioVisita: state.horarioVisita,
        personasACargo: state.personasACargo,
        objEstadoCivilId: state.objEstadoCivilId,
        nombreConyugue: state.nombreConyugue,
        trabajaConyugue: state.trabajaConyugue,
        trabajoConyugue: state.trabajoConyugue,
        direccionTrabajoConyugue: state.direccionTrabajoConyugue,
        telefonoTrabajoConyugue: state.telefonoTrabajoConyugue,
        beneficiarioSeguro: state.beneficiarioSeguro,
        cedulaBeneficiarioSeguro: state.cedulaBeneficiarioSeguro,
        objParentescoBeneficiarioSeguroId:
            state.objParentescoBeneficiarioSeguroId,
        beneficiarioSeguro1: state.beneficiarioSeguro1,
        cedulaBeneficiarioSeguro1: state.cedulaBeneficiarioSeguro1,
        objParentescoBeneficiarioSeguroId1:
            state.objParentescoBeneficiarioSeguroId1,
        objEstadoSolicitudId: state.objEstadoSolicitudId,
        objOficialCreditoId: state.objOficialCreditoId,
        objProductoId: state.objProductoId,
        observacion: state.observacion,
        sucursal: state.sucursal,
        ubicacionLongitud: state.ubicacionLongitud,
        ubicacionLatitud: state.ubicacionLatitud,
        ubicacionGradosLongitud: state.ubicacionGradosLongitud,
        ubicacionGradosLatitud: state.ubicacionGradosLatitud,
        objEscolaridadId: state.objEscolaridadId,
        cantidadHijos: state.cantidadHijos,
        nombrePublico: state.nombrePublico,
        objSexoId: state.objSexoId,
        objPaisNacimientoId: state.objPaisNacimientoId,
        nacionalidadConyugue: state.nacionalidadConyugue,
        database: state.database,
        ubicacion: state.ubicacion,
        espeps: state.espeps,
        nombreDeEntidadPeps: state.nombreDeEntidadPeps,
        paisPeps: state.paisPeps,
        periodoPeps: state.periodoPeps,
        cargoOficialPeps: state.cargoOficialPeps,
        tieneFamiliarPeps: state.tieneFamiliarPeps,
        nombreFamiliarPeps2: state.nombreFamiliarPeps2,
        parentescoFamiliarPeps2: state.parentescoFamiliarPeps2,
        cargoFamiliarPeps2: state.cargoFamiliarPeps2,
        nombreEntidadPeps2: state.nombreEntidadPeps2,
        periodoPeps2: state.periodoPeps2,
        paisPeps2: state.paisPeps2,
        objRubroActividad: state.objRubroActividad,
        objActividadPredominante: state.objActividadPredominante,
        esFamiliarEmpleado: state.esFamiliarEmpleado,
        nombreFamiliar: state.nombreFamiliar,
        cedulaFamiliar: state.cedulaFamiliar,
        objTipoDocumentoId: state.objTipoDocumentoId,
        objRubroActividad2: state.objRubroActividad2,
        objRubroActividad3: state.objRubroActividad3,
        objRubroActividadPredominante: state.objRubroActividadPredominante,
        tipoPersona: state.tipoPersona,
        objTipoPersonaId: state.objTipoPersonaId,
        telefonoBeneficiario: state.telefonoBeneficiario,
        telefonoBeneficiarioSeguro1: state.telefonoBeneficiarioSeguro1,
        plazoSolicitud: state.plazoSolicitud,
        fechaPrimerPagoSolicitud: state.fechaPrimerPagoSolicitud,
      ));
      if (!isOk) {
        return emit(state.copyWith(status: Status.error, errorMsg: msg));
      }
      emit(state.copyWith(status: Status.done));
    } catch (e) {
      saveAnswers(errorMsg: e.toString());
      emit(state.copyWith(status: Status.error, errorMsg: e.toString()));
    }
  }

  void saveAnswers({
    String? objOrigenSolicitudId,
    String? objOrigenSolicitudIdVer,
    String? nombre1,
    String? nombre2,
    String? apellido1,
    String? apellido2,
    String? cedula,
    String? objPaisEmisorCedula,
    String? objPaisEmisorCedulaVer,
    String? fechaEmisionCedula,
    String? fechaVencimientoCedula,
    String? fechaNacimiento,
    String? telefono,
    String? celular,
    String? direccionCasa,
    String? barrioCasa,
    String? objMunicipioCasaId,
    String? objMunicipioCasaIdVer,
    String? objDepartamentoCasaId,
    String? objDepartamentoCasaIdVer,
    String? objPaisCasaId,
    String? objPaisCasaIdVer,
    String? profesion,
    String? ocupacion,
    String? nacionalidad,
    String? objCondicionCasaId,
    String? objCondicionCasaIdVer,
    int? anosResidirCasa,
    String? email,
    int? monto,
    String? objMonedaId,
    String? objMonedaIdVer,
    String? objPropositoId,
    String? objPropositoIdVer,
    String? objFrecuenciaId,
    String? objFrecuenciaIdVer,
    int? cuota,
    String? objActividadId,
    String? objActividadIdVer,
    String? objActividadId1,
    String? objActividadId1Ver,
    String? objActividadId2,
    String? objActividadId2Ver,
    String? objSectorId,
    String? objSectorIdVer,
    String? nombreNegocio,
    String? tiempoFuncionamientoNegocio,
    String? direccionNegocio,
    String? barrioNegocio,
    String? objMunicipioNegocioId,
    String? objMunicipioNegocioIdVer,
    String? objCondicionNegocioId,
    String? objCondicionNegocioIdVer,
    String? horarioTrabajo,
    String? horarioVisita,
    int? personasACargo,
    String? objEstadoCivilId,
    String? objEstadoCivilIdVer,
    String? nombreConyugue,
    bool? trabajaConyugue,
    String? trabajoConyugue,
    String? direccionTrabajoConyugue,
    String? telefonoTrabajoConyugue,
    String? beneficiarioSeguro,
    String? cedulaBeneficiarioSeguro,
    String? objParentescoBeneficiarioSeguroId,
    String? objParentescoBeneficiarioSeguroIdVer,
    String? beneficiarioSeguro1,
    String? cedulaBeneficiarioSeguro1,
    String? objParentescoBeneficiarioSeguroId1,
    String? objParentescoBeneficiarioSeguroId1Ver,
    String? objEstadoSolicitudId,
    String? objEstadoSolicitudIdVer,
    String? objOficialCreditoId,
    String? objOficialCreditoIdVer,
    String? objProductoId,
    String? objProductoIdVer,
    String? observacion,
    String? sucursal,
    String? ubicacionLongitud,
    String? ubicacionLatitud,
    String? ubicacionGradosLongitud,
    String? ubicacionGradosLatitud,
    String? objEscolaridadId,
    String? objEscolaridadIdVer,
    int? cantidadHijos,
    String? nombrePublico,
    String? objSexoId,
    String? objSexoIdVer,
    String? objPaisNacimientoId,
    String? objPaisNacimientoIdVer,
    String? nacionalidadConyugue,
    String? database,
    String? ubicacion,
    bool? espeps,
    String? nombreDeEntidadPeps,
    String? paisPeps,
    String? periodoPeps,
    String? cargoOficialPeps,
    bool? tieneFamiliarPeps,
    String? nombreFamiliarPeps2,
    String? parentescoFamiliarPeps2,
    String? cargoFamiliarPeps2,
    String? nombreEntidadPeps2,
    String? periodoPeps2,
    String? paisPeps2,
    String? objRubroActividad,
    String? objRubroActividadVer,
    String? objActividadPredominante,
    String? objActividadPredominanteVer,
    bool? esFamiliarEmpleado,
    String? nombreFamiliar,
    String? cedulaFamiliar,
    String? objTipoDocumentoId,
    String? objTipoDocumentoIdVer,
    String? objRubroActividad2,
    String? objRubroActividad2Ver,
    String? objRubroActividad3,
    String? objRubroActividad3Ver,
    String? objRubroActividadPredominante,
    String? objRubroActividadPredominanteVer,
    String? tipoPersona,
    String? objTipoPersonaId,
    String? objTipoPersonaIdVer,
    String? telefonoBeneficiario,
    String? telefonoBeneficiarioSeguro1,
    int? plazoSolicitud,
    String? fechaPrimerPagoSolicitud,
    String? fechaDesembolso,
    double? prestamoInteres,
    int? localSolicitudId,
    bool? isDone,
    String? errorMsg,
    bool? hasVerified,
  }) {
    emit(
      state.copyWith(
          hasVerified: hasVerified,
          isDone: isDone,
          idLocalResponse: localSolicitudId,
          objOrigenSolicitudId: objOrigenSolicitudId,
          objOrigenSolicitudIdVer: objOrigenSolicitudIdVer,
          fechaDesembolso: fechaDesembolso,
          prestamoInteres: prestamoInteres,
          nombre1: nombre1,
          nombre2: nombre2,
          apellido1: apellido1,
          apellido2: apellido2,
          cedula: cedula,
          objPaisEmisorCedula: objPaisEmisorCedula,
          objPaisEmisorCedulaVer: objPaisEmisorCedulaVer,
          fechaEmisionCedula: fechaEmisionCedula,
          fechaVencimientoCedula: fechaVencimientoCedula,
          fechaNacimiento: fechaNacimiento,
          telefono: telefono,
          celular: celular,
          direccionCasa: direccionCasa,
          barrioCasa: barrioCasa,
          objMunicipioCasaId: objMunicipioCasaId,
          objMunicipioCasaIdVer: objMunicipioCasaIdVer,
          objDepartamentoCasaId: objDepartamentoCasaId,
          objDepartamentoCasaIdVer: objDepartamentoCasaIdVer,
          objPaisCasaId: objPaisCasaId,
          objPaisCasaIdVer: objPaisCasaIdVer,
          profesion: profesion,
          ocupacion: ocupacion,
          nacionalidad: nacionalidad,
          objCondicionCasaId: objCondicionCasaId,
          objCondicionCasaIdVer: objCondicionCasaIdVer,
          anosResidirCasa: anosResidirCasa,
          email: email,
          monto: monto,
          objMonedaId: objMonedaId,
          objMonedaIdVer: objMonedaIdVer,
          objPropositoId: objPropositoId,
          objPropositoIdVer: objPropositoIdVer,
          objFrecuenciaId: objFrecuenciaId,
          objFrecuenciaIdVer: objFrecuenciaIdVer,
          cuota: cuota,
          objActividadId: objActividadId,
          objActividadIdVer: objActividadIdVer,
          objActividadId1: objActividadId1,
          objActividadId1Ver: objActividadId1Ver,
          objActividadId2: objActividadId2,
          objActividadId2Ver: objActividadId2Ver,
          objSectorId: objSectorId,
          objSectorIdVer: objSectorIdVer,
          nombreNegocio: nombreNegocio,
          tiempoFuncionamientoNegocio: tiempoFuncionamientoNegocio,
          direccionNegocio: direccionNegocio,
          barrioNegocio: barrioNegocio,
          objMunicipioNegocioId: objMunicipioNegocioId,
          objMunicipioNegocioIdVer: objMunicipioNegocioIdVer,
          objCondicionNegocioId: objCondicionNegocioId,
          objCondicionNegocioIdVer: objCondicionNegocioIdVer,
          horarioTrabajo: horarioTrabajo,
          horarioVisita: horarioVisita,
          personasACargo: personasACargo,
          objEstadoCivilId: objEstadoCivilId,
          objEstadoCivilIdVer: objEstadoCivilIdVer,
          nombreConyugue: nombreConyugue,
          trabajaConyugue: trabajaConyugue,
          trabajoConyugue: trabajoConyugue,
          direccionTrabajoConyugue: direccionTrabajoConyugue,
          telefonoTrabajoConyugue: telefonoTrabajoConyugue,
          beneficiarioSeguro: beneficiarioSeguro,
          cedulaBeneficiarioSeguro: cedulaBeneficiarioSeguro,
          objParentescoBeneficiarioSeguroId: objParentescoBeneficiarioSeguroId,
          objParentescoBeneficiarioSeguroIdVer:
              objParentescoBeneficiarioSeguroIdVer,
          beneficiarioSeguro1: beneficiarioSeguro1,
          cedulaBeneficiarioSeguro1: cedulaBeneficiarioSeguro1,
          objParentescoBeneficiarioSeguroId1:
              objParentescoBeneficiarioSeguroId1,
          objParentescoBeneficiarioSeguroId1Ver:
              objParentescoBeneficiarioSeguroId1Ver,
          objEstadoSolicitudId: objEstadoSolicitudId,
          objEstadoSolicitudIdVer: objEstadoSolicitudIdVer,
          objOficialCreditoId: objOficialCreditoId,
          objOficialCreditoIdVer: objOficialCreditoIdVer,
          objProductoId: objProductoId,
          objProductoIdVer: objProductoIdVer,
          observacion: observacion,
          sucursal: sucursal,
          ubicacionLongitud: ubicacionLongitud,
          ubicacionLatitud: ubicacionLatitud,
          ubicacionGradosLongitud: ubicacionGradosLongitud,
          ubicacionGradosLatitud: ubicacionGradosLatitud,
          objEscolaridadId: objEscolaridadId,
          objEscolaridadIdVer: objEscolaridadIdVer,
          cantidadHijos: cantidadHijos,
          nombrePublico: nombrePublico,
          objSexoId: objSexoId,
          objSexoIdVer: objSexoIdVer,
          objPaisNacimientoId: objPaisNacimientoId,
          objPaisNacimientoIdVer: objPaisNacimientoIdVer,
          nacionalidadConyugue: nacionalidadConyugue,
          database: database,
          ubicacion: ubicacion,
          espeps: espeps,
          nombreDeEntidadPeps: nombreDeEntidadPeps,
          paisPeps: paisPeps,
          periodoPeps: periodoPeps,
          cargoOficialPeps: cargoOficialPeps,
          tieneFamiliarPeps: tieneFamiliarPeps,
          nombreFamiliarPeps2: nombreFamiliarPeps2,
          parentescoFamiliarPeps2: parentescoFamiliarPeps2,
          cargoFamiliarPeps2: cargoFamiliarPeps2,
          nombreEntidadPeps2: nombreEntidadPeps2,
          periodoPeps2: periodoPeps2,
          paisPeps2: paisPeps2,
          objRubroActividad: objRubroActividad,
          objRubroActividadVer: objRubroActividadVer,
          objActividadPredominante: objActividadPredominante,
          objActividadPredominanteVer: objActividadPredominanteVer,
          esFamiliarEmpleado: esFamiliarEmpleado,
          nombreFamiliar: nombreFamiliar,
          cedulaFamiliar: cedulaFamiliar,
          objTipoDocumentoId: objTipoDocumentoId,
          objTipoDocumentoIdVer: objTipoDocumentoIdVer,
          objRubroActividad2: objRubroActividad2,
          objRubroActividad2Ver: objRubroActividad2Ver,
          objRubroActividad3: objRubroActividad3,
          objRubroActividad3Ver: objRubroActividad3Ver,
          objRubroActividadPredominante: objRubroActividadPredominante,
          objRubroActividadPredominanteVer: objRubroActividadPredominanteVer,
          tipoPersona: tipoPersona,
          objTipoPersonaId: objTipoPersonaId,
          objTipoPersonaIdVer: objTipoPersonaIdVer,
          telefonoBeneficiario: telefonoBeneficiario,
          telefonoBeneficiarioSeguro1: telefonoBeneficiarioSeguro1,
          plazoSolicitud: plazoSolicitud,
          fechaPrimerPagoSolicitud: fechaPrimerPagoSolicitud,
          errorMsg: errorMsg),
    );
    saveLocalAnswers(isUpdate: state.idLocalResponse != 0);
  }

  void saveLocalAnswers({bool isUpdate = false}) {
    if (state.idLocalResponse != 0) {
      log('Updating solicitud');
      localDbProvider.updateSolicitudNuevaMenorById(
        id: state.idLocalResponse,
        responseLocalDb: ResponseLocalDb(
          hasVerified: state.hasVerified,
          errorMsg: state.errorMsg,
          isDone: state.isDone,
          createdAt: DateTime.now(),
          fechaDesembolso: state.fechaDesembolso,
          prestamoInteres: state.prestamoInteres,
          objOrigenSolicitudId: state.objOrigenSolicitudId,
          horarioTrabajo: state.horarioTrabajo,
          horarioVisita: state.horarioVisita,
          personasACargo: state.personasACargo,
          objEstadoCivilId: state.objEstadoCivilId,
          nombreConyugue: state.nombreConyugue,
          trabajaConyugue: state.trabajaConyugue,
          trabajoConyugue: state.trabajoConyugue,
          direccionTrabajoConyugue: state.direccionTrabajoConyugue,
          telefonoTrabajoConyugue: state.telefonoTrabajoConyugue,
          beneficiarioSeguro: state.beneficiarioSeguro,
          cedulaBeneficiarioSeguro: state.cedulaBeneficiarioSeguro,
          objParentescoBeneficiarioSeguroId:
              state.objParentescoBeneficiarioSeguroId,
          beneficiarioSeguro1: state.beneficiarioSeguro1,
          cedulaBeneficiarioSeguro1: state.cedulaBeneficiarioSeguro1,
          objParentescoBeneficiarioSeguroId1:
              state.objParentescoBeneficiarioSeguroId1,
          objEstadoSolicitudId: state.objEstadoSolicitudId,
          objOficialCreditoId: state.objOficialCreditoId,
          objProductoId: state.objProductoId,
          observacion: state.observacion,
          sucursal: state.sucursal,
          ubicacionLongitud: state.ubicacionLongitud,
          ubicacionLatitud: state.ubicacionLatitud,
          ubicacionGradosLongitud: state.ubicacionGradosLongitud,
          ubicacionGradosLatitud: state.ubicacionGradosLatitud,
          objEscolaridadId: state.objEscolaridadId,
          cantidadHijos: state.cantidadHijos,
          nombrePublico: state.nombrePublico,
          objSexoId: state.objSexoId,
          objPaisNacimientoId: state.objPaisNacimientoId,
          nacionalidadConyugue: state.nacionalidadConyugue,
          database: state.database,
          ubicacion: state.ubicacion,
          espeps: state.espeps,
          nombreDeEntidadPeps: state.nombreDeEntidadPeps,
          paisPeps: state.paisPeps,
          periodoPeps: state.periodoPeps,
          cargoOficialPeps: state.cargoOficialPeps,
          tieneFamiliarPeps: state.tieneFamiliarPeps,
          nombreFamiliarPeps2: state.nombreFamiliarPeps2,
          parentescoFamiliarPeps2: state.parentescoFamiliarPeps2,
          cargoFamiliarPeps2: state.cargoFamiliarPeps2,
          nombreEntidadPeps2: state.nombreEntidadPeps2,
          periodoPeps2: state.periodoPeps2,
          paisPeps2: state.paisPeps2,
          objRubroActividad: state.objRubroActividad,
          objActividadPredominante: state.objActividadPredominante,
          esFamiliarEmpleado: state.esFamiliarEmpleado,
          nombreFamiliar: state.nombreFamiliar,
          cedulaFamiliar: state.cedulaFamiliar,
          objTipoDocumentoId: state.objTipoDocumentoId,
          objRubroActividad2: state.objRubroActividad2,
          objRubroActividad3: state.objRubroActividad3,
          objRubroActividadPredominante: state.objRubroActividadPredominante,
          tipoPersona: state.tipoPersona,
          objTipoPersonaId: state.objTipoPersonaId,
          telefonoBeneficiario: state.telefonoBeneficiario,
          telefonoBeneficiarioSeguro1: state.telefonoBeneficiarioSeguro1,
          plazoSolicitud: state.plazoSolicitud,
          fechaPrimerPagoSolicitud: state.fechaPrimerPagoSolicitud,
          nombre1: state.nombre1,
          nombre2: state.nombre2,
          apellido1: state.apellido1,
          apellido2: state.apellido2,
          cedula: state.cedula,
          objPaisEmisorCedula: state.objPaisEmisorCedula,
          fechaEmisionCedula: state.fechaEmisionCedula,
          fechaVencimientoCedula: state.fechaVencimientoCedula,
          fechaNacimiento: state.fechaNacimiento,
          telefono: state.telefono,
          celular: state.celular,
          direccionCasa: state.direccionCasa,
          barrioCasa: state.barrioCasa,
          objMunicipioCasaId: state.objMunicipioCasaId,
          objDepartamentoCasaId: state.objDepartamentoCasaId,
          objPaisCasaId: state.objPaisCasaId,
          profesion: state.profesion,
          ocupacion: state.ocupacion,
          nacionalidad: state.nacionalidad,
          objCondicionCasaId: state.objCondicionCasaId,
          anosResidirCasa: state.anosResidirCasa,
          email: state.email,
          monto: state.monto,
          objMonedaId: state.objMonedaId,
          objPropositoId: state.objPropositoId,
          objFrecuenciaId: state.objFrecuenciaId,
          cuota: state.cuota,
          objActividadId: state.objActividadId,
          objActividadId1: state.objActividadId1,
          objActividadId2: state.objActividadId2,
          objSectorId: state.objSectorId,
          nombreNegocio: state.nombreNegocio,
          tiempoFuncionamientoNegocio: state.tiempoFuncionamientoNegocio,
          direccionNegocio: state.direccionNegocio,
          barrioNegocio: state.barrioNegocio,
          objMunicipioNegocioId: state.objMunicipioNegocioId,
          objCondicionNegocioId: state.objCondicionNegocioId,
          objOrigenSolicitudIdVer: state.objOrigenSolicitudIdVer,
          objPaisEmisorCedulaVer: state.objPaisEmisorCedulaVer,
          objMunicipioCasaIdVer: state.objMunicipioCasaIdVer,
          objDepartamentoCasaIdVer: state.objDepartamentoCasaIdVer,
          objPaisCasaIdVer: state.objPaisCasaIdVer,
          objCondicionCasaIdVer: state.objCondicionCasaIdVer,
          objMonedaIdVer: state.objMonedaIdVer,
          objPropositoIdVer: state.objPropositoIdVer,
          objFrecuenciaIdVer: state.objFrecuenciaIdVer,
          objActividadIdVer: state.objActividadIdVer,
          objActividadId1Ver: state.objActividadId1Ver,
          objActividadId2Ver: state.objActividadId2Ver,
          objSectorIdVer: state.objSectorIdVer,
          objMunicipioNegocioIdVer: state.objMunicipioNegocioIdVer,
          objCondicionNegocioIdVer: state.objCondicionNegocioIdVer,
          objEstadoCivilIdVer: state.objEstadoCivilIdVer,
          objParentescoBeneficiarioSeguroIdVer:
              state.objParentescoBeneficiarioSeguroIdVer,
          objParentescoBeneficiarioSeguroId1Ver:
              state.objParentescoBeneficiarioSeguroId1Ver,
          objEstadoSolicitudIdVer: state.objEstadoSolicitudIdVer,
          objOficialCreditoIdVer: state.objOficialCreditoIdVer,
          objProductoIdVer: state.objProductoIdVer,
          objEscolaridadIdVer: state.objEscolaridadIdVer,
          objSexoIdVer: state.objSexoIdVer,
          objPaisNacimientoIdVer: state.objPaisNacimientoIdVer,
          objRubroActividadVer: state.objRubroActividadVer,
          objActividadPredominanteVer: state.objActividadPredominanteVer,
          objTipoDocumentoIdVer: state.objTipoDocumentoIdVer,
          objRubroActividad2Ver: state.objRubroActividad2Ver,
          objRubroActividad3Ver: state.objRubroActividad3Ver,
          objRubroActividadPredominanteVer:
              state.objRubroActividadPredominanteVer,
          objTipoPersonaIdVer: state.objTipoPersonaIdVer,
        ),
      );
      return;
    }
    log('Creando uno nuevo');
    final resp = localDbProvider.saveSolicitudesNuevaMenorResponses(
      responseLocalDb: ResponseLocalDb(
        hasVerified: state.hasVerified,
        errorMsg: state.errorMsg,
        isDone: state.isDone,
        createdAt: DateTime.now(),
        objOrigenSolicitudId: state.objOrigenSolicitudId,
        horarioTrabajo: state.horarioTrabajo,
        horarioVisita: state.horarioVisita,
        personasACargo: state.personasACargo,
        objEstadoCivilId: state.objEstadoCivilId,
        nombreConyugue: state.nombreConyugue,
        trabajaConyugue: state.trabajaConyugue,
        trabajoConyugue: state.trabajoConyugue,
        direccionTrabajoConyugue: state.direccionTrabajoConyugue,
        telefonoTrabajoConyugue: state.telefonoTrabajoConyugue,
        beneficiarioSeguro: state.beneficiarioSeguro,
        cedulaBeneficiarioSeguro: state.cedulaBeneficiarioSeguro,
        objParentescoBeneficiarioSeguroId:
            state.objParentescoBeneficiarioSeguroId,
        beneficiarioSeguro1: state.beneficiarioSeguro1,
        cedulaBeneficiarioSeguro1: state.cedulaBeneficiarioSeguro1,
        objParentescoBeneficiarioSeguroId1:
            state.objParentescoBeneficiarioSeguroId1,
        objEstadoSolicitudId: state.objEstadoSolicitudId,
        objOficialCreditoId: state.objOficialCreditoId,
        objProductoId: state.objProductoId,
        observacion: state.observacion,
        sucursal: state.sucursal,
        ubicacionLongitud: state.ubicacionLongitud,
        ubicacionLatitud: state.ubicacionLatitud,
        ubicacionGradosLongitud: state.ubicacionGradosLongitud,
        ubicacionGradosLatitud: state.ubicacionGradosLatitud,
        objEscolaridadId: state.objEscolaridadId,
        cantidadHijos: state.cantidadHijos,
        nombrePublico: state.nombrePublico,
        objSexoId: state.objSexoId,
        objPaisNacimientoId: state.objPaisNacimientoId,
        nacionalidadConyugue: state.nacionalidadConyugue,
        database: state.database,
        ubicacion: state.ubicacion,
        espeps: state.espeps,
        nombreDeEntidadPeps: state.nombreDeEntidadPeps,
        paisPeps: state.paisPeps,
        periodoPeps: state.periodoPeps,
        cargoOficialPeps: state.cargoOficialPeps,
        tieneFamiliarPeps: state.tieneFamiliarPeps,
        nombreFamiliarPeps2: state.nombreFamiliarPeps2,
        parentescoFamiliarPeps2: state.parentescoFamiliarPeps2,
        cargoFamiliarPeps2: state.cargoFamiliarPeps2,
        nombreEntidadPeps2: state.nombreEntidadPeps2,
        periodoPeps2: state.periodoPeps2,
        paisPeps2: state.paisPeps2,
        objRubroActividad: state.objRubroActividad,
        objActividadPredominante: state.objActividadPredominante,
        esFamiliarEmpleado: state.esFamiliarEmpleado,
        nombreFamiliar: state.nombreFamiliar,
        cedulaFamiliar: state.cedulaFamiliar,
        objTipoDocumentoId: state.objTipoDocumentoId,
        objRubroActividad2: state.objRubroActividad2,
        objRubroActividad3: state.objRubroActividad3,
        objRubroActividadPredominante: state.objRubroActividadPredominante,
        tipoPersona: state.tipoPersona,
        objTipoPersonaId: state.objTipoPersonaId,
        telefonoBeneficiario: state.telefonoBeneficiario,
        telefonoBeneficiarioSeguro1: state.telefonoBeneficiarioSeguro1,
        plazoSolicitud: state.plazoSolicitud,
        fechaPrimerPagoSolicitud: state.fechaPrimerPagoSolicitud,
        nombre1: state.nombre1,
        nombre2: state.nombre2,
        apellido1: state.apellido1,
        apellido2: state.apellido2,
        cedula: state.cedula,
        objPaisEmisorCedula: state.objPaisEmisorCedula,
        fechaEmisionCedula: state.fechaEmisionCedula,
        fechaVencimientoCedula: state.fechaVencimientoCedula,
        fechaNacimiento: state.fechaNacimiento,
        telefono: state.telefono,
        celular: state.celular,
        direccionCasa: state.direccionCasa,
        barrioCasa: state.barrioCasa,
        objMunicipioCasaId: state.objMunicipioCasaId,
        objDepartamentoCasaId: state.objDepartamentoCasaId,
        objPaisCasaId: state.objPaisCasaId,
        profesion: state.profesion,
        ocupacion: state.ocupacion,
        nacionalidad: state.nacionalidad,
        objCondicionCasaId: state.objCondicionCasaId,
        anosResidirCasa: state.anosResidirCasa,
        email: state.email,
        monto: state.monto,
        objMonedaId: state.objMonedaId,
        objPropositoId: state.objPropositoId,
        objFrecuenciaId: state.objFrecuenciaId,
        cuota: state.cuota,
        objActividadId: state.objActividadId,
        objActividadId1: state.objActividadId1,
        objActividadId2: state.objActividadId2,
        objSectorId: state.objSectorId,
        nombreNegocio: state.nombreNegocio,
        tiempoFuncionamientoNegocio: state.tiempoFuncionamientoNegocio,
        direccionNegocio: state.direccionNegocio,
        barrioNegocio: state.barrioNegocio,
        objMunicipioNegocioId: state.objMunicipioNegocioId,
        objCondicionNegocioId: state.objCondicionNegocioId,
        fechaDesembolso: state.fechaDesembolso,
        prestamoInteres: state.prestamoInteres,
        objOrigenSolicitudIdVer: state.objOrigenSolicitudIdVer,
        objPaisEmisorCedulaVer: state.objPaisEmisorCedulaVer,
        objMunicipioCasaIdVer: state.objMunicipioCasaIdVer,
        objDepartamentoCasaIdVer: state.objDepartamentoCasaIdVer,
        objPaisCasaIdVer: state.objPaisCasaIdVer,
        objCondicionCasaIdVer: state.objCondicionCasaIdVer,
        objMonedaIdVer: state.objMonedaIdVer,
        objPropositoIdVer: state.objPropositoIdVer,
        objFrecuenciaIdVer: state.objFrecuenciaIdVer,
        objActividadIdVer: state.objActividadIdVer,
        objActividadId1Ver: state.objActividadId1Ver,
        objActividadId2Ver: state.objActividadId2Ver,
        objSectorIdVer: state.objSectorIdVer,
        objMunicipioNegocioIdVer: state.objMunicipioNegocioIdVer,
        objCondicionNegocioIdVer: state.objCondicionNegocioIdVer,
        objEstadoCivilIdVer: state.objEstadoCivilIdVer,
        objParentescoBeneficiarioSeguroIdVer:
            state.objParentescoBeneficiarioSeguroIdVer,
        objParentescoBeneficiarioSeguroId1Ver:
            state.objParentescoBeneficiarioSeguroId1Ver,
        objEstadoSolicitudIdVer: state.objEstadoSolicitudIdVer,
        objOficialCreditoIdVer: state.objOficialCreditoIdVer,
        objProductoIdVer: state.objProductoIdVer,
        objEscolaridadIdVer: state.objEscolaridadIdVer,
        objSexoIdVer: state.objSexoIdVer,
        objPaisNacimientoIdVer: state.objPaisNacimientoIdVer,
        objRubroActividadVer: state.objRubroActividadVer,
        objActividadPredominanteVer: state.objActividadPredominanteVer,
        objTipoDocumentoIdVer: state.objTipoDocumentoIdVer,
        objRubroActividad2Ver: state.objRubroActividad2Ver,
        objRubroActividad3Ver: state.objRubroActividad3Ver,
        objRubroActividadPredominanteVer:
            state.objRubroActividadPredominanteVer,
        objTipoPersonaIdVer: state.objTipoPersonaIdVer,
      ),
    );
    emit(state.copyWith(idLocalResponse: resp.id));
  }
}
